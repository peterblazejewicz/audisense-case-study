# Client Architecture Migration Strategy for WPF to Blazor Transition

## Status

Proposed

## Context

Defines the migration approach for transforming WPF client architecture to Blazor components, building on ADR-002 preparation strategy. Must address differences between WPF's MVVM pattern and Blazor's component-based architecture while preserving business logic.

## Decision

### Migration Pattern: Service-Preserved Component Model

**Service Layer:**
- Preserve business logic services from `AudiSense.Application`
- Remove platform prefixes for applicable services (e.g., data services, state services)
- Use Blazor's dependency injection container

**Component Transformation:**
- ViewModels → Blazor component state (`@code` blocks)
- UserControls → `.razor` components
- Commands → Event handlers
- Data binding → Reactive updates via `StateHasChanged()`

**State Management:**
- Component-level: Local state for UI data, parameter binding
- Application-level: Shared state service, browser storage

**Navigation:**
- Replace WPF windows with Blazor Router and `@page` directives
- Use Blazor's built-in `NavigationManager` service for programmatic navigation
- Transform dialogs to modal components or separate routed pages
- Leverage URL-based routing instead of custom navigation service

### Migration Phases

1. **Foundation** (Weeks 1-2): Base architecture, navigation, core services
2. **Components** (Weeks 3-6): Business components, ViewModels transformation
3. **Enhancement** (Weeks 7-8): PWA features, responsive design, optimization

### Code Reusability

- **90-100% Reusable**: API controllers, domain entities, business rules
- **70-90% Adaptable**: HTTP clients, business services (remove WPF dependencies)
- **Pattern-Mappable**: ViewModels, UserControls, navigation, data binding

## Consequences

**Benefits:**
- 75-80% code preservation
- Cross-platform compatibility
- Enhanced web-based user experience

**Challenges:**
- Team learning curve for Blazor patterns
- New testing strategies required
- Performance optimization for complex UI

**Prerequisites:**
- ADR-002 preparation phases completed
- Team Blazor training recommended

---

* Approved by: [name] on [date]
* Supersedes: [ADR-NUMBER] (optional)
* Superseded by: [ADR-NUMBER] (optional)
