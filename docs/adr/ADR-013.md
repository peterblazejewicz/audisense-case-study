# Standalone PWA Application Mode for WPF Migration

## Status
Proposed

## Context

When migrating from a native WPF desktop application to Blazor WebAssembly, one critical architectural decision is how the web application should be presented to users. Traditional web applications run within browser chrome (address bar, tabs, browser menus), which can feel foreign to users accustomed to native desktop applications.

Progressive Web Applications (PWAs) offer multiple display modes that can bridge this gap between web and native experiences. The choice of PWA display mode significantly impacts user perception, adoption, and overall migration success from the existing WPF application.

Key considerations for WPF migration include:
- User familiarity with dedicated application windows
- Need for immersive, distraction-free interfaces
- Desktop-like behavior expectations
- Integration with operating system features
- Maintaining brand consistency and visual identity

The PWA specification defines several display modes: `fullscreen`, `standalone`, `minimal-ui`, and `browser`. Each mode offers different levels of browser chrome removal and native-like behavior.

## Decision

We will implement the **standalone PWA display mode** for our Blazor WebAssembly application migrated from WPF.

### Available Options Analysis

1. **Browser Mode**
   - **Description**: Standard web application with full browser UI
   - **Pros**: Familiar web experience, easy debugging, standard web behaviors
   - **Cons**: Breaks desktop application illusion, distracting browser chrome, reduced screen real estate
   - **Recommendation**: ❌ Not suitable for WPF migration

2. **Minimal-UI Mode**
   - **Description**: Minimal browser chrome with basic navigation controls
   - **Pros**: Same native feel while retaining a navigation safety net
   - **Cons**: Still presents as a web application, inconsistent across browsers
   - **Recommendation**: ⚠️ Compromise option, but not optimal

3. **Fullscreen Mode**
   - **Description**: Complete removal of browser UI, full immersion
   - **Pros**: Maximum screen real estate, complete native feel
   - **Cons**: Can be disorienting, challenging to exit, security concerns for users
   - **Recommendation**: ❌ Too aggressive for business applications

4. **Standalone Mode** ⭐
   - **Description**: Dedicated application window without browser chrome
   - **Pros**: 
     - Native desktop application feel
     - Dedicated taskbar entry
     - Window management (minimize, maximize, close)
     - No distracting browser elements
     - Maintains user mental model known from WPF
     - Operating system integration
   - **Cons**: Requires PWA installation, some users may be unfamiliar of the process
   - **Recommendation**: ✅ **Optimal choice for WPF migration**

### Implementation Strategy

The standalone mode will be configured in the web app manifest (`manifest.json`):

```json
{
  "name": "AudiSense",
  "short_name": "AudiSense",
  "display": "standalone",
  "start_url": "/",
  "scope": "/",
  "theme_color": "#1976d2",
  "background_color": "#ffffff"
}
```

### Visual Consistency Enhancements

To maintain brand consistency and familiar look-and-feel from the WPF application:

1. **Theme Color Matching**
   - Extract primary colors from an existing WPF application
   - Configure `theme_color` in manifest to match WPF window chrome
   - Implement consistent color scheme across CSS custom properties

2. **Background Color Coordination**
   - Set `background_color` to match WPF application background
   - Ensures a smooth loading experience without jarring color shifts
   - Maintains visual continuity during application startup

3. **Title Bar Customization**
   - Implement consistent iconography and branding

4. **Window Behavior Alignment**
   - Implement responsive breakpoints that respect WPF layout patterns
   - Maintain consistent spacing and component sizing

### Optional Advanced Enhancements

1. **Operating System Integration**
   - Configure app icons for various operating systems
   - Implement context menu integration where supported: app shortcuts
   - Add support for system notifications matching WPF patterns

2. **Seamless Installation Experience**
   - Design custom PWA installation prompts
   - Create a user onboarding flow explaining a new deployment model
   - Provide fallback instructions for manual installation

## Consequences

### Positive Outcomes

- **Familiar User Experience**: Users transitioning from WPF will feel at home with dedicated application windows
- **Improved Focus**: Removal of browser chrome eliminates distractions and increases usable screen space
- **Native Integration**: Applications appear in taskbar, application switchers, and system menus like native desktop applications
- **Brand Consistency**: Opportunity to maintain visual identity and color schemes from the original WPF application
- **Installation Benefits**: Users can "install" the application, creating psychological ownership similar to desktop software
- **Offline Capability**: PWA infrastructure enables offline functionality, matching desktop application expectations

### Challenges and Mitigations

- **User Education Required**: Some users may need guidance on PWA installation and usage patterns
  - *Mitigation*: Provide clear onboarding documentation and installation guides
- **Browser Support Variations**: Different browsers may handle standalone mode slightly differently
  - *Mitigation*: Test across major browsers and provide fallback experiences
- **Development Complexity**: Additional configuration and testing required for PWA features
  - *Mitigation*: Leverage existing Blazor PWA templates and established patterns

### Technical Considerations

- PWA service worker implementation required for full standalone experience
- Manifest file must be properly configured and served with correct MIME types
- HTTPS deployment mandatory for PWA functionality
- Icon assets are needed in multiple sizes for various operating systems
- Testing is required across different installation scenarios and devices

### Long-term Benefits

This decision positions the application for future enhancements including:
- Native desktop integration through emerging APIs
- Mobile deployment with consistent experience
- Enhanced offline capabilities
- Integration with operating system features like file associations
- Potential for app store distribution

---

* Approved by: [name] on [date]
* Builds upon: ADR-012 (User Experience Migration Strategy)
